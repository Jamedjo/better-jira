!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){n(1),n(2),n(3),t.exports=n(4)},function(t,e,n){"use strict";function i(){return null!==document.querySelector('meta[name="application-name"]')&&"JIRA"===document.querySelector('meta[name="application-name"]').content}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="ghx-detail-view",this.Storage=chrome.storage.sync,this.listening=!1,this.running=!0,this.manageMouseListener=this.manageMouse.bind(this)}return o(t,[{key:"run",value:function(){var t=this;if(!i())return this.dontRun();var e=document.getElementById(this.id);if(!e)return this.dontRun();e.addEventListener("mouseenter",function(){if(null===e.querySelector(".better-resize")){var n=document.createElement("div");n.classList.add("better-resize"),e.appendChild(n),e.querySelector(".better-resize").addEventListener("mousedown",function(e){e.preventDefault(),2!==e.button&&(document.addEventListener("mousemove",t.manageMouseListener),t.listening=!0)}),document.addEventListener("mouseup",function(e){t.listening&&(document.removeEventListener("mousemove",t.manageMouseListener),t.listening=!1,t.saveDetailViewWidth())})}})}},{key:"manageMouse",value:function(t){if(this.running){var e=window.innerWidth-t.pageX+2;document.documentElement.style.setProperty("--detail-view-width",e+"px")}}},{key:"saveDetailViewWidth",value:function(){this.running&&(console.log("ðŸ”§: Detail Width",document.documentElement.style.getPropertyValue("--detail-view-width")),this.Storage.set({detailViewWidth:document.documentElement.style.getPropertyValue("--detail-view-width")}))}},{key:"dontRun",value:function(){this.running=!1}}]),t}()),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cssClass="standup",this.data={},this.standupListener=this.doStandup.bind(this),this.running=!0}return r(t,[{key:"run",value:function(t){if(i())if(t){document.body.classList.add(this.cssClass),window.addEventListener("keydown",this.standupListener);var e=document.createElement("div");e.classList.add("instructions"),e.innerHTML="<ul><li>Press <kbd>S</kbd> to start walking the board</li>\n      <li>Use <kbd>Shift</kbd> + <kbd>&larr;</kbd>/<kbd>&rarr;</kbd> to move up and down the board.</li></ul>",document.body.appendChild(e),this.initializeStandup()}else this.cleanupStandup();else this.running=!1}},{key:"initializeStandup",value:function(){var t=this;if(this.running){window.standup=!0,this.data.swimlanes=[],Array.from(document.querySelectorAll(".ghx-swimlane")).forEach(function(e){var n=e.querySelectorAll(".ghx-columns > .ghx-column");t.data.columnCount=n.length,t.data.pointer=t.data.columnCount-1,n[t.data.pointer].classList.add("large-column"),t.data.swimlanes.push(n)});var e=document.getElementById("ghx-column-header-group").querySelectorAll(".ghx-column");e[this.data.pointer].classList.add("large-column"),this.data.swimlanes.push(e)}}},{key:"cleanupStandup",value:function(){if(document.body.classList.remove(this.cssClass),window.standup=!1,window.removeEventListener("keydown",this.standupListener),void 0!==this.data.pointer&&void 0!==this.data.swimlanes){var t=document.querySelector(".instructions");null!==t&&t.remove(),this._clearColumnBackground()}}},{key:"doStandup",value:function(t){if(this.running){if("ArrowLeft"===t.key&&t.shiftKey){if(t.preventDefault(),this.data.pointer-1<0)return;this._clearColumnBackground(),this.data.pointer=this.data.pointer-1,this._setColumnBackground()}if("ArrowRight"===t.key&&t.shiftKey){if(t.preventDefault(),this.data.pointer+1===this.data.columnCount)return;this._clearColumnBackground(),this.data.pointer=this.data.pointer+1,this._setColumnBackground()}}}},{key:"_clearColumnBackground",value:function(){var t=this;this.data.swimlanes.forEach(function(e){e[t.data.pointer].classList.remove("large-column")})}},{key:"_setColumnBackground",value:function(){var t=this;this.running&&this.data.swimlanes.forEach(function(e){e[t.data.pointer].classList.add("large-column")})}}]),t}()),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var d=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.Storage=chrome.storage.sync,this.loadListener=null,this.running=!0}return s(t,[{key:"initiate",value:function(){i()?(this._preemptiveStrike(),this.loadListener=this._onLoad.bind(this),window.addEventListener("load",this.loadListener)):this.running=!1}},{key:"update",value:function(t){this._updateColumnWidths(t.detail),this._initiateStandup(t.detail.standup)}},{key:"_onLoad",value:function(){this._initialColumnResize(),this._protectAgainstReactBoardReloading()}},{key:"_reload",value:function(){var t=this;this.Storage.get(["enabled","columnWidth"],function(e){setTimeout(function(){!function n(){document.querySelector(".ghx-swimlane > .ghx-columns")?t._updateColumnWidths(e):setTimeout(function(){n()},700)}()},700)}),this._protectAgainstReactBoardReloading()}},{key:"_updateColumnWidths",value:function(t){this.running&&(t.enabled?(document.body.classList.add("better-jira"),this._getPreferredWidth(t)):document.body.classList.remove("better-jira"))}},{key:"_preemptiveStrike",value:function(){var t=this;this.running&&(document.body.classList.add("better-jira"),this._ifEnabled(function(){t.Storage.get("poolWidth",function(e){e.poolWidth<10||isNaN(e.poolWidth)||(console.log("ðŸ”§: Preemptively setting width now"),t._setPoolWidth(e.poolWidth))}),t.Storage.get("detailViewWidth",function(e){void 0!==e.detailViewWidth&&(console.log("ðŸ”§: Setting Detail View width now!"),t._setDetailViewWidth(e.detailViewWidth))})}))}},{key:"_ifEnabled",value:function(t,e){this.running&&this.Storage.get("enabled",function(n){n.enabled?t():"function"==typeof e&&e()})}},{key:"_initialColumnResize",value:function(){this.running&&(window.removeEventListener("load",this.loadListener),console.log("ðŸ”§: Page loaded, running Better JIRA now."),setTimeout(this._resizeColumns.bind(this),700))}},{key:"_resizeColumns",value:function(){var t=this;if(this.running&&null!==document.querySelector(".ghx-swimlane")){this._ifEnabled(function(){document.body.classList.add("better-jira"),t.Storage.get("columnWidth",t._getPreferredWidth.bind(t))}.bind(this),function(){document.body.classList.remove("better-jira")}.bind(this)),this.Storage.get("standup",function(e){t._initiateStandup(e.standup)})}}},{key:"_getPreferredWidth",value:function(t){this.running&&(this.data.columnWidth=t.columnWidth,isNaN(this.data.columnWidth)&&(this.data.columnWidth=200),this._setPreferredWidth())}},{key:"_setPreferredWidth",value:function(){if(this.running){var t,e,n=void 0;if(t=this.data.columnWidth,!((n=(e=document.querySelector(".ghx-swimlane > .ghx-columns").querySelectorAll(".ghx-column").length)*t+12*e)<10)){if(n<window.innerWidth){var i=document.querySelector("#gh");n=parseInt(i.offsetWidth)-parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))}try{var o={poolWidth:n};this.Storage.set(o),this._setPoolWidth(n)}catch(t){console.error(t)}}}}},{key:"_setPoolWidth",value:function(t){document.documentElement.style.setProperty("--viewport-width",t+"px")}},{key:"_setDetailViewWidth",value:function(t){document.documentElement.style.setProperty("--detail-view-width",t)}},{key:"_initiateStandup",value:function(t){u.run(t)}},{key:"_protectAgainstReactBoardReloading",value:function(){var t=this,e=document.querySelector('[aria-label="Switch boards"]');e&&e.addEventListener("click",function(e){setTimeout(function(){var e=document.querySelector('[aria-label="Boards in this Project"]');e&&e.addEventListener("click",function(e){setTimeout(function(){t._reload()},1)})},1)})}}]),t}());d.initiate(),a.run(),document.addEventListener("better-jira:updated",function(t){console.log("ðŸ”§: woohoo!",t.detail),d.update(t)})},function(t,e){},function(t,e){},function(t,e){}]);