(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){c(1),c(2),c(3),a.exports=c(4)},function(a,b){'use strict';function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){c(this,a),this.cssClass='standup',this.data={listening:!1}}return f(a,[{key:'run',value:function(a){var b=document.querySelector('body');if(!a)return b.classList.remove(this.cssClass),void this.cleanupStandup();if(b.classList.add(this.cssClass),!this.listening){window.addEventListener('keydown',this.doStandup.bind(this)),this.listening=!0;var c=document.createElement('div');c.classList.add('instructions'),c.innerHTML='<ul><li>Press <kbd>S</kbd> to start walking the board</li>\n        <li>Use <kbd>Shift</kbd> + <kbd>&larr;</kbd>/<kbd>&rarr;</kbd> to move up and down the board.</li></ul>',document.body.appendChild(c)}this.initializeStandup()}},{key:'initializeStandup',value:function(){var a=this;this.data.swimlanes=[],Array.from(document.querySelectorAll('.ghx-swimlane')).forEach(function(b){var c=b.querySelectorAll('.ghx-columns > .ghx-column');a.data.columnCount=c.length,a.data.pointer=a.data.columnCount-1,c[a.data.pointer].classList.add('large-column'),a.data.swimlanes.push(c)});var b=document.getElementById('ghx-column-header-group').querySelectorAll('.ghx-column');b[this.data.pointer].classList.add('large-column'),this.data.swimlanes.push(b)}},{key:'cleanupStandup',value:function(){void 0===this.data.pointer||void 0===this.data.swimlanes||this._clearColumnBackground()}},{key:'doStandup',value:function(a){if('ArrowLeft'===a.key&&a.shiftKey){if(a.preventDefault(),0>this.data.pointer-1)return;this._clearColumnBackground(),--this.data.pointer,this._setColumnBackground()}if('ArrowRight'===a.key&&a.shiftKey){if(a.preventDefault(),this.data.pointer+1===this.data.columnCount)return;this._clearColumnBackground(),++this.data.pointer,this._setColumnBackground()}}},{key:'_clearColumnBackground',value:function(){var a=this;this.data.swimlanes.forEach(function(b){b[a.data.pointer].classList.remove('large-column')})}},{key:'_setColumnBackground',value:function(){var a=this;this.data.swimlanes.forEach(function(b){b[a.data.pointer].classList.add('large-column')})}}]),a}(),h=new g,i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(){d(this,a),this.id='ghx-detail-view',this.Storage=chrome.storage.sync}return i(a,[{key:'run',value:function(){var a=this,b=document.getElementById(this.id);b.addEventListener('mouseenter',function(){if(null===b.querySelector('.better-resize')){var c=document.createElement('div');c.classList.add('better-resize'),b.appendChild(c),b.querySelector('.better-resize').addEventListener('mousedown',function(b){b.preventDefault(),2===b.button||document.addEventListener('mousemove',a.manageMouse)}),document.addEventListener('mouseup',function(){document.removeEventListener('mousemove',a.manageMouse),a.saveDetailViewWidth()})}})}},{key:'manageMouse',value:function(a){var b=-1*a.screenX+2;void 0!==window.newJira&&window.newJira||null!==document.querySelector('.adg3')?(b-=32,window.newJira=!0):window.newJira=!1,document.documentElement.style.setProperty('--detail-view-width',b+'px')}},{key:'saveDetailViewWidth',value:function(){this.Storage.set({detailViewWidth:document.documentElement.style.getPropertyValue('--detail-view-width')})}}]),a}(),k=new j,l=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(){function a(){e(this,a),this.data={},this.Storage=chrome.storage.sync}return l(a,[{key:'ifEnabled',value:function(a,b){this.Storage.get('enabled',function(c){return c.enabled?void a():void('function'==typeof b&&b())})}},{key:'preemptiveStrike',value:function(){var a=this;document.body.classList.add('better-jira'),this.ifEnabled(function(){a.Storage.get('poolWidth',function(b){10>b.poolWidth||isNaN(b.poolWidth)||(console.log('\uD83D\uDD27: Preemptively setting width now'),a._setPoolWidth(b.poolWidth))}),a.Storage.get('detailViewWidth',function(b){void 0===b.detailViewWidth||(console.log('\uD83D\uDD27: Setting Detail View width now!'),a._setDetailViewWidth(b.detailViewWidth))})})}},{key:'initiate',value:function(){window.removeEventListener('load',this.initiate,!1),console.log('\uD83D\uDD27: Page loaded, running Better JIRA now.'),setTimeout(this._resizeColumns.bind(this),700)}},{key:'updateColumnWidths',value:function(a){return a.enabled?void(document.body.classList.add('better-jira'),this._getPreferredWidth(a)):void document.body.classList.remove('better-jira')}},{key:'_resizeColumns',value:function(){var a=this;null===document.querySelector('.ghx-swimlane')||(this.Storage.get('enabled',function(b){return b.enabled?void(document.body.classList.add('better-jira'),a.Storage.get('columnWidth',a._getPreferredWidth.bind(a))):void document.body.classList.remove('better-jira')}),this.Storage.get('standup',function(a){h.run(a.standup)}))}},{key:'_getPreferredWidth',value:function(a){this.data.columnWidth=a.columnWidth,isNaN(this.data.columnWidth)&&(this.data.columnWidth=200),this._setPreferredWidth()}},{key:'_setPreferredWidth',value:function(){var a,b,c,d;a=this.data.columnWidth,b=document.querySelector('.ghx-swimlane > .ghx-columns').querySelectorAll('.ghx-column').length,c=12*b,d=b*a+c,10>d||(this.Storage.set({poolWidth:d}),this._setPoolWidth(d))}},{key:'_setPoolWidth',value:function(a){document.documentElement.style.setProperty('--viewport-width',a+'px')}},{key:'_setDetailViewWidth',value:function(a){document.documentElement.style.setProperty('--detail-view-width',a)}}]),a}(),n=new m;window.addEventListener('load',n.initiate.bind(n),!1),n.preemptiveStrike(),k.run(),document.addEventListener('better-jira:updated',function(a){console.log('\uD83D\uDD27: woohoo!',a.detail),n.updateColumnWidths(a.detail),h.run(a.detail.standup)})},function(){},function(){},function(){}]);