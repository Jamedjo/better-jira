(()=>{function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.Storage=chrome.storage.sync,this.data={},this.defaults={columnWidth:220,enabled:!1,standup:!1,updatedEvent:"better-jira:updated"},this.loadListener=this.boot.bind(this),window.addEventListener("load",this.loadListener)}var n,a,d;return n=t,(a=[{key:"boot",value:function(){window.removeEventListener("load",this.loadListener),this.setDefaults(),this.handleFormEvents()}},{key:"setDefaults",value:function(){var e=this;this.Storage.get("columnWidth",(function(t){console.log("storage",t);var n=t.columnWidth;console.log("columnWidth from Storage",n),n||(n=e.defaults.columnWidth,e.Storage.set({columnWidth:n})),e.data.columnWidth=n,document.getElementById("columnWidth").value=e.data.columnWidth})),this.Storage.get("enabled",(function(t){var n=t.enabled;void 0===n&&(n=e.defaults.enabled,e.Storage.set({enabled:n})),e.data.enabled=n,console.log("enabled storage",t),document.getElementById("enabled").checked=!!n})),this.Storage.get("standup",(function(t){var n=t.standup;void 0===n&&(n=e.defaults.standup,e.Storage.set({standup:n})),e.data.standup=n,console.log("standup storage",t),document.getElementById("standup").checked=!!n}))}},{key:"handleFormEvents",value:function(){var e=this;document.getElementById("close").addEventListener("click",(function(e){window.close()}));var t=document.getElementById("enabled");t.addEventListener("click",(function(n){e.data.enabled=t.checked,e.save()}));var n=document.getElementById("standup");n.addEventListener("click",(function(t){console.log("you clicked it!",n.checked,t),e.data.standup=n.checked,e.save()})),document.querySelector("#better-jira #columnWidth").addEventListener("change",(function(t){t.target.value>10&&(e.data.columnWidth=document.getElementById("columnWidth").value,e.save())}))}},{key:"save",value:function(){var e=this;this.Storage.set({enabled:this.data.enabled},(function(){e.Storage.set({columnWidth:e.data.columnWidth},(function(){e.Storage.set({standup:e.data.standup},e.refresh.bind(e))}))}))}},{key:"refresh",value:function(){var e=["(function()","{","'use strict';","let updateEvent = new CustomEvent('".concat(this.defaults.updatedEvent,"', {"),"detail: {","columnWidth: ".concat(this.data.columnWidth,","),"enabled: ".concat(this.data.enabled,","),"standup: ".concat(this.data.standup,","),"}","});","document.dispatchEvent(updateEvent);","})();"];chrome.tabs.executeScript({code:e.join("")})}}])&&e(n.prototype,a),d&&e(n,d),Object.defineProperty(n,"prototype",{writable:!1}),t}())})();