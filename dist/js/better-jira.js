(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){c(1),c(2),c(3),a.exports=c(4)},function(a,b){'use strict';function c(){var a=document.querySelector('meta[name="application-name"]');return null!==a&&'JIRA'===document.querySelector('meta[name="application-name"]').content}function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function f(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){d(this,a),this.id='ghx-detail-view',this.Storage=chrome.storage.sync,this.listening=!1,this.running=!0,this.manageMouseListener=this.manageMouse.bind(this)}return g(a,[{key:'run',value:function(){var a=this;if(!c())return this.dontRun();var b=document.getElementById(this.id);return b?void b.addEventListener('mouseenter',function(){if(null===b.querySelector('.better-resize')){var c=document.createElement('div');c.classList.add('better-resize'),b.appendChild(c),b.querySelector('.better-resize').addEventListener('mousedown',function(b){b.preventDefault(),2===b.button||(document.addEventListener('mousemove',a.manageMouseListener),a.listening=!0)}),document.addEventListener('mouseup',function(){a.listening&&(document.removeEventListener('mousemove',a.manageMouseListener),a.listening=!1,a.saveDetailViewWidth())})}}):this.dontRun()}},{key:'manageMouse',value:function(a){if(this.running){var b=window.innerWidth-a.pageX+2;document.documentElement.style.setProperty('--detail-view-width',b+'px')}}},{key:'saveDetailViewWidth',value:function(){this.running&&(console.log('\uD83D\uDD27: Detail Width',document.documentElement.style.getPropertyValue('--detail-view-width')),this.Storage.set({detailViewWidth:document.documentElement.style.getPropertyValue('--detail-view-width')}))}},{key:'dontRun',value:function(){this.running=!1}}]),a}(),i=new h,j=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(){function a(){e(this,a),this.cssClass='standup',this.data={},this.standupListener=this.doStandup.bind(this),this.running=!0}return j(a,[{key:'run',value:function(a){if(!c())return void(this.running=!1);if(!a)return void this.cleanupStandup();document.body.classList.add(this.cssClass),window.addEventListener('keydown',this.standupListener);var b=document.createElement('div');b.classList.add('instructions'),b.innerHTML='<ul><li>Press <kbd>S</kbd> to start walking the board</li>\n      <li>Use <kbd>Shift</kbd> + <kbd>&larr;</kbd>/<kbd>&rarr;</kbd> to move up and down the board.</li></ul>',document.body.appendChild(b),this.initializeStandup()}},{key:'initializeStandup',value:function(){var a=this;if(this.running){window.standup=!0,this.data.swimlanes=[],Array.from(document.querySelectorAll('.ghx-swimlane')).forEach(function(b){var c=b.querySelectorAll('.ghx-columns > .ghx-column');a.data.columnCount=c.length,a.data.pointer=a.data.columnCount-1,c[a.data.pointer].classList.add('large-column'),a.data.swimlanes.push(c)});var b=document.getElementById('ghx-column-header-group').querySelectorAll('.ghx-column');b[this.data.pointer].classList.add('large-column'),this.data.swimlanes.push(b)}}},{key:'cleanupStandup',value:function(){if(document.body.classList.remove(this.cssClass),window.standup=!1,window.removeEventListener('keydown',this.standupListener),void 0!==this.data.pointer&&void 0!==this.data.swimlanes){var a=document.querySelector('.instructions');null!==a&&a.remove(),this._clearColumnBackground()}}},{key:'doStandup',value:function(a){if(this.running){if('ArrowLeft'===a.key&&a.shiftKey){if(a.preventDefault(),0>this.data.pointer-1)return;this._clearColumnBackground(),--this.data.pointer,this._setColumnBackground()}if('ArrowRight'===a.key&&a.shiftKey){if(a.preventDefault(),this.data.pointer+1===this.data.columnCount)return;this._clearColumnBackground(),++this.data.pointer,this._setColumnBackground()}}}},{key:'_clearColumnBackground',value:function(){var a=this;this.data.swimlanes.forEach(function(b){b[a.data.pointer].classList.remove('large-column')})}},{key:'_setColumnBackground',value:function(){var a=this;this.running&&this.data.swimlanes.forEach(function(b){b[a.data.pointer].classList.add('large-column')})}}]),a}(),l=new k,m=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(){function a(){f(this,a),this.data={},this.Storage=chrome.storage.sync,this.loadListener=null,this.running=!0}return m(a,[{key:'initiate',value:function(){return c()?void(this._preemptiveStrike(),this.loadListener=this._onLoad.bind(this),window.addEventListener('load',this.loadListener)):void(this.running=!1)}},{key:'update',value:function(a){this._updateColumnWidths(a.detail),this._initiateStandup(a.detail.standup)}},{key:'_onLoad',value:function(){this._initialColumnResize(),this._protectAgainstReactBoardReloading()}},{key:'_reload',value:function(){var a=this;this.Storage.get(['enabled','columnWidth'],function(b){var c=function c(){return document.querySelector('.ghx-swimlane > .ghx-columns')?void a._updateColumnWidths(b):void setTimeout(function(){c()},700)};setTimeout(function(){c()},700)}),this._protectAgainstReactBoardReloading()}},{key:'_updateColumnWidths',value:function(a){return this.running?a.enabled?void(document.body.classList.add('better-jira'),this._getPreferredWidth(a)):void document.body.classList.remove('better-jira'):void 0}},{key:'_preemptiveStrike',value:function(){var a=this;this.running&&(document.body.classList.add('better-jira'),this._ifEnabled(function(){a.Storage.get('poolWidth',function(b){10>b.poolWidth||isNaN(b.poolWidth)||(console.log('\uD83D\uDD27: Preemptively setting width now'),a._setPoolWidth(b.poolWidth))}),a.Storage.get('detailViewWidth',function(b){void 0===b.detailViewWidth||(console.log('\uD83D\uDD27: Setting Detail View width now!'),a._setDetailViewWidth(b.detailViewWidth))})}))}},{key:'_ifEnabled',value:function(a,b){this.running&&this.Storage.get('enabled',function(c){return c.enabled?void a():void('function'==typeof b&&b())})}},{key:'_initialColumnResize',value:function(){this.running&&(window.removeEventListener('load',this.loadListener),console.log('\uD83D\uDD27: Page loaded, running Better JIRA now.'),setTimeout(this._resizeColumns.bind(this),700))}},{key:'_resizeColumns',value:function(){var a=this;if(this.running&&null!==document.querySelector('.ghx-swimlane')){var b=function(){document.body.classList.add('better-jira'),a.Storage.get('columnWidth',a._getPreferredWidth.bind(a))},c=function(){document.body.classList.remove('better-jira')};this._ifEnabled(b.bind(this),c.bind(this)),this.Storage.get('standup',function(b){a._initiateStandup(b.standup)})}}},{key:'_getPreferredWidth',value:function(a){this.running&&(this.data.columnWidth=a.columnWidth,isNaN(this.data.columnWidth)&&(this.data.columnWidth=200),this._setPreferredWidth())}},{key:'_setPreferredWidth',value:function(){if(this.running){var a,b,c,d;if(a=this.data.columnWidth,b=document.querySelector('.ghx-swimlane > .ghx-columns').querySelectorAll('.ghx-column').length,c=12*b,d=b*a+c,!(10>d)){if(d<window.innerWidth){var e=document.querySelector('#gh');d=parseInt(e.offsetWidth)-parseInt(window.getComputedStyle(e,null).getPropertyValue('padding-left'))}try{var f={poolWidth:d};this.Storage.set(f),this._setPoolWidth(d)}catch(a){console.error(a)}}}}},{key:'_setPoolWidth',value:function(a){document.documentElement.style.setProperty('--viewport-width',a+'px')}},{key:'_setDetailViewWidth',value:function(a){document.documentElement.style.setProperty('--detail-view-width',a)}},{key:'_initiateStandup',value:function(a){l.run(a)}},{key:'_protectAgainstReactBoardReloading',value:function(){var a=this,b=document.querySelector('[aria-label="Switch boards"]');b&&b.addEventListener('click',function(){setTimeout(function(){var b=document.querySelector('[aria-label="Boards in this Project"]');b&&b.addEventListener('click',function(){setTimeout(function(){a._reload()},1)})},1)})}}]),a}(),o=new n;o.initiate(),i.run(),document.addEventListener('better-jira:updated',function(a){console.log('\uD83D\uDD27: woohoo!',a.detail),o.update(a)})},function(){},function(){},function(){}]);